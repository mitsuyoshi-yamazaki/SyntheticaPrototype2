# spec-v3 課題・TODOリスト

## 概要

このファイルは、Synthetica仕様v3.0.0に関する未解決の課題とTODO項目を管理します。

## 記載方法

- 「一覧」の項に、すべての課題とTODOをチェックボックス形式で記載する
- 完了した項目はチェックを入れる（`- [x]`）
- 詳細な説明が必要な項目のみ、その項目名を見出しとして「詳細」の項に記載する
- 詳細がある項目は末尾に 📝 を付けて表示する
- 一行で説明が完結する項目は、一覧での記載のみで完了とする
- 優先度に応じて自由に並べ替え可能

## 一覧

- v3仕様 📝
  - [ ] DISASSEMBLERの（一時）廃止
  - [ ] 各ユニットのスペックを読み出す操作メモリ領域を追加する
  - [ ] Synthetica C記法の検討する 📝
  - [ ] 現在の時刻を取得する命令が必要か検討する 📝
  - [ ] v3.0.0準拠の自己複製エージェント実装例の作成 📝
  - [ ] エネルギー確保順序とアクション実行順序の決定 📝
  - [ ] ビット演算を活用した効率的な実装方法の文書化 📝
  - [ ] エネルギーソースの実装仕様 📝
  - [ ] 熱拡散システムの詳細定義 📝
  - [ ] 移動システムの実装詳細 📝
- v4仕様 📝
  - [ ] 新ユニットタイプの検討（v4.0.0向け）
  - [ ] 物理演算システムの拡張検討（v4.0.0向け）
  - [ ] 通信プロトコルの定義（将来バージョン）
  - [ ] エネルギー効率的なエージェント設計パターンの文書化
  - [ ] デバッグ用ツールの仕様検討
  - [ ] エージェント実装者向けのベストプラクティス集の作成
  - [ ] よくある質問（FAQ）の作成
  - [ ] 用語集の作成

## 詳細

### v3仕様

- 本v3仕様の目的は、以下のコンセプトが動作するアプリケーションの仕様を作成することである
  - プログラム可能なエージェントが自己複製できる物理系
  - 複数の手法による自己複製および進化が可能
- このアプリケーションの目的は要素技術の検証であり、他人が使うことは想定しない

### v4仕様

- v4使用の目的は、他人に実際にアプリケーションを使ってもらうことによって、アプリケーション、仕様、ゲームデザインの改良点を発見することにある
- 他人に使ってもらう = 進化するエージェントを実装してもらう ために、それを実装する以下の動機を導入する
  - エージェントに自律行動の機能を付与する（MOVERおよびCONNECTORユニットの追加、DISASSEMBLERユニットの実用化）
  - エージェントに外界の情報を取得する機能を付与する（SENSORユニットの追加）

### Synthetica C記法の検討する

- Synthetica ScriptへコンパイルするC言語の記法のうち、一般的なC言語の踏襲では実現できないものがあると思われる
- テンプレート記法は、 `goto` 命令のみであればラベルに特定の文言が含まれている場合にはテンプレート記法である、という解釈で良いが、ループや分岐、メソッド呼び出しなどは、一般的なC言語の記法では実現できないと思われる
- これらをどのように実現するか、一般的なC言語の記法で実現する方法があるか、なければどのように記述するか検討する

### 現在の時刻を取得する命令が必要か検討する

- tickが進んだことに依存する処理を実装したい、という要望はあると思われる（内蔵エネルギー量のチェック、v4で予定されているSENSORユニットの読み出し値チェック、等は同じtickで再度行っても意味がないため）
- しかし、そのように直接的に世界の情報を取得する命令はあまり実装したくない
  - tickのようなシステム根幹の情報を露出させずとも行う方法はあるのではないか。検討する

### エネルギー確保順序とアクション実行順序の決定

- **状態**: 未着手
- **詳細**: 複数ユニットが同時にエネルギーを要求する場合の処理順序が未定義
- **影響**: ゲームバランスと公平性に影響
- **関連ファイル**: `game-world-requirement.md`

### ビット演算を活用した効率的な実装方法の文書化

- **状態**: 未着手
- **詳細**: 1024進法エネルギー計算の効率的な実装例が不足
- **影響**: 実装者の参考資料
- **関連ファイル**: `agent-code/v3.0.0/synthetica-c-compiler.md`

### エネルギーソースの実装仕様

- **状態**: 未着手
- **詳細**: エネルギーソースの詳細な動作仕様が未定義
- **影響**: ゲームプレイの核心機能
- **関連ファイル**: `game-world-requirement.md`

### 熱拡散システムの詳細定義

- **状態**: 未着手
- **詳細**: 熱の発生・拡散・減衰の具体的な計算式が未定義
- **影響**: 環境相互作用の重要要素
- **関連ファイル**: `game-world-requirement.md`

### 移動システムの実装詳細

- **状態**: 未着手
- **詳細**: MOVERユニットの具体的な動作仕様が不完全
- **影響**: エージェントの移動機能
- **関連ファイル**: `game-world-requirement.md`

### v3.0.0準拠の自己複製エージェント実装例の作成

- **状態**: 未着手
- **詳細**: 新しい命令セットを活用した効率的な自己複製エージェントの実装例を作成する。また、別の自己複製実装について検討することでSynthetica Scriptの仕様の不足を洗い出す。
  - 以下の3種類の異なる自己複製処理をもつエージェントを実装する
    - プログラム的に娘個体を定義（参考: `v3.0.0以前/example.c` ）
    - メモリ上に格納したスペックを元に複製（万能複製
    - 自己のスペックをスキャンして複製
- **関連ファイル**: `agent-code/v3.0.0/`

## 完了項目のアーカイブ

完了した項目は、完了日とともに以下に記録し、定期的に`done/`ディレクトリへ移動します。

### 2025-07-28 完了

- [x] エネルギースケール変更（1024進法への移行）
- [x] 16bitアーキテクチャへの移行
- [x] レジスタベース・間接アドレッシング命令の追加
- [x] UNIT_EXISTS命令の追加
- [x] エネルギー計算専用命令の追加
- [x] セマンティックバージョニングの導入（v3.0.0）

## 更新履歴

- 2025-07-28: ファイル作成、初期項目の整理
